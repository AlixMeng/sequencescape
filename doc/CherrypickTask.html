<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: CherrypickTask
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "CherrypickTask";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo;
    
    
    <span class="title">CherrypickTask</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="class_list.html"></iframe>

      <div id="content"><h1>Class: CherrypickTask
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Task.html" title="Task (class)">Task</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">ActiveRecord::Base</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Task.html" title="Task (class)">Task</a></span></li>
          
            <li class="next">CherrypickTask</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/cherrypick_task.rb</dd>
  </dl>
  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="CherrypickTask/BatchWrapper.html" title="CherrypickTask::BatchWrapper (class)">BatchWrapper</a></span>, <span class='object_link'><a href="CherrypickTask/PickTarget.html" title="CherrypickTask::PickTarget (class)">PickTarget</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="EMPTY_WELL-constant" class="">EMPTY_WELL =
        
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Empty</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span></pre></dd>
    
      <dt id="TEMPLATE_EMPTY_WELL-constant" class="">TEMPLATE_EMPTY_WELL =
        
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>---</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span></pre></dd>
    
  </dl>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_plate_wells_from_requests-instance_method" title="#build_plate_wells_from_requests (instance method)">#<strong>build_plate_wells_from_requests</strong>(requests)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_control_request_from_well-instance_method" title="#create_control_request_from_well (instance method)">#<strong>create_control_request_from_well</strong>(control_param)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_render_element-instance_method" title="#create_render_element (instance method)">#<strong>create_render_element</strong>(request)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_task-instance_method" title="#do_task (instance method)">#<strong>do_task</strong>(workflow, params)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_control_request-instance_method" title="#generate_control_request (instance method)">#<strong>generate_control_request</strong>(well)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_well_from_control_param-instance_method" title="#get_well_from_control_param (instance method)">#<strong>get_well_from_control_param</strong>(control_param)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#partial-instance_method" title="#partial (instance method)">#<strong>partial</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#perform_pick-instance_method" title="#perform_pick (instance method)">#<strong>perform_pick</strong>(requests, robot, batch, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pick_new_plate-instance_method" title="#pick_new_plate (instance method)">#<strong>pick_new_plate</strong>(requests, template, robot, batch, plate_purpose)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pick_onto_partial_plate-instance_method" title="#pick_onto_partial_plate (instance method)">#<strong>pick_onto_partial_plate</strong>(requests, template, robot, batch, partial_plate)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render_task-instance_method" title="#render_task (instance method)">#<strong>render_task</strong>(workflow, params)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Task.html" title="Task (class)">Task</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Task.html#find_batch-instance_method" title="Task#find_batch (method)">#find_batch</a></span>, <span class='object_link'><a href="Task.html#find_batch_requests-instance_method" title="Task#find_batch_requests (method)">#find_batch_requests</a></span>, <span class='object_link'><a href="Task.html#generate_events_from_descriptors-instance_method" title="Task#generate_events_from_descriptors (method)">#generate_events_from_descriptors</a></span>, <span class='object_link'><a href="Task.html#get_descriptor_value-instance_method" title="Task#get_descriptor_value (method)">#get_descriptor_value</a></span>, <span class='object_link'><a href="Task.html#get_subclass_attribute_options-class_method" title="Task.get_subclass_attribute_options (method)">get_subclass_attribute_options</a></span>, <span class='object_link'><a href="Task.html#get_subclass_attribute_options-instance_method" title="Task#get_subclass_attribute_options (method)">#get_subclass_attribute_options</a></span>, <span class='object_link'><a href="Task.html#get_subclass_attribute_value-instance_method" title="Task#get_subclass_attribute_value (method)">#get_subclass_attribute_value</a></span>, <span class='object_link'><a href="Task.html#get_subclass_attributes-class_method" title="Task.get_subclass_attributes (method)">get_subclass_attributes</a></span>, <span class='object_link'><a href="Task.html#get_subclass_attributes-instance_method" title="Task#get_subclass_attributes (method)">#get_subclass_attributes</a></span>, <span class='object_link'><a href="Task.html#included_for_do_task-instance_method" title="Task#included_for_do_task (method)">#included_for_do_task</a></span>, <span class='object_link'><a href="Task.html#included_for_render_task-instance_method" title="Task#included_for_render_task (method)">#included_for_render_task</a></span>, <span class='object_link'><a href="Task.html#init_class-class_method" title="Task.init_class (method)">init_class</a></span>, <span class='object_link'><a href="Task.html#set_descriptor_value-instance_method" title="Task#set_descriptor_value (method)">#set_descriptor_value</a></span>, <span class='object_link'><a href="Task.html#set_subclass_attribute-class_method" title="Task.set_subclass_attribute (method)">set_subclass_attribute</a></span>, <span class='object_link'><a href="Task.html#set_subclass_attribute_value-instance_method" title="Task#set_subclass_attribute_value (method)">#set_subclass_attribute_value</a></span>, <span class='object_link'><a href="Task.html#sub_events_for-instance_method" title="Task#sub_events_for (method)">#sub_events_for</a></span>, <span class='object_link'><a href="Task.html#subassets_for_asset-instance_method" title="Task#subassets_for_asset (method)">#subassets_for_asset</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">ActiveRecord::Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ActiveRecord/Base.html#find_by_id_or_name-class_method" title="ActiveRecord::Base.find_by_id_or_name (method)">find_by_id_or_name</a></span>, <span class='object_link'><a href="ActiveRecord/Base.html#find_by_id_or_name%21-class_method" title="ActiveRecord::Base.find_by_id_or_name! (method)">find_by_id_or_name!</a></span>, <span class='object_link'><a href="ActiveRecord/Base.html#routing_key-instance_method" title="ActiveRecord::Base#routing_key (method)">#routing_key</a></span>, <span class='object_link'><a href="ActiveRecord/Base.html#transaction_with_amqp-class_method" title="ActiveRecord::Base.transaction_with_amqp (method)">transaction_with_amqp</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ApiTools.html" title="ApiTools (module)">ApiTools</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApiTools.html#as_json-instance_method" title="ApiTools#as_json (method)">#as_json</a></span>, <span class='object_link'><a href="ApiTools.html#for_api-instance_method" title="ApiTools#for_api (method)">#for_api</a></span>, <span class='object_link'><a href="ApiTools.html#included-class_method" title="ApiTools.included (method)">included</a></span>, <span class='object_link'><a href="ApiTools.html#list_json-instance_method" title="ApiTools#list_json (method)">#list_json</a></span>, <span class='object_link'><a href="ApiTools.html#to_xml-instance_method" title="ApiTools#to_xml (method)">#to_xml</a></span>, <span class='object_link'><a href="ApiTools.html#to_yaml-instance_method" title="ApiTools#to_yaml (method)">#to_yaml</a></span>, <span class='object_link'><a href="ApiTools.html#url-instance_method" title="ApiTools#url (method)">#url</a></span>, <span class='object_link'><a href="ApiTools.html#url_name-instance_method" title="ApiTools#url_name (method)">#url_name</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="build_plate_wells_from_requests-instance_method">
  
    #<strong>build_plate_wells_from_requests</strong>(requests)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223
224
225
226
227
228
229
230
231
232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 221</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_plate_wells_from_requests'>build_plate_wells_from_requests</span><span class='lparen'>(</span><span class='id identifier rubyid_requests'>requests</span><span class='rparen'>)</span>
  <span class='const'>Request</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>requests.id AS id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>plates.barcode AS barcode</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>maps.description AS description</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='lbracket'>[</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INNER JOIN assets wells ON requests.asset_id=wells.id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INNER JOIN container_associations ON container_associations.content_id=wells.id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INNER JOIN assets plates ON plates.id=container_associations.container_id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INNER JOIN maps ON wells.map_id=maps.id</span><span class='tstring_end'>&#39;</span></span>
    <span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>plates.barcode ASC, maps.column_order ASC</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>requests:</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='id identifier rubyid_requests'>requests</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_barcode'>barcode</span><span class='comma'>,</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_description'>description</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_control_request_from_well-instance_method">
  
    #<strong>create_control_request_from_well</strong>(control_param)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_control_request_from_well'>create_control_request_from_well</span><span class='lparen'>(</span><span class='id identifier rubyid_control_param'>control_param</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_control_param'>control_param</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>control</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_well'>well</span> <span class='op'>=</span> <span class='id identifier rubyid_get_well_from_control_param'>get_well_from_control_param</span><span class='lparen'>(</span><span class='id identifier rubyid_control_param'>control_param</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_well'>well</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_generate_control_request'>generate_control_request</span><span class='lparen'>(</span><span class='id identifier rubyid_well'>well</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_render_element-instance_method">
  
    #<strong>create_render_element</strong>(request)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 11</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_render_element'>create_render_element</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="do_task-instance_method">
  
    #<strong>do_task</strong>(workflow, params)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_do_task'>do_task</span><span class='lparen'>(</span><span class='id identifier rubyid_workflow'>workflow</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_workflow'>workflow</span><span class='period'>.</span><span class='id identifier rubyid_do_cherrypick_task'>do_cherrypick_task</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>Cherrypick</span><span class='op'>::</span><span class='const'>Error</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exception'>exception</span>
  <span class='id identifier rubyid_workflow'>workflow</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:flash</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_control_request-instance_method">
  
    #<strong>generate_control_request</strong>(well)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 237</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_control_request'>generate_control_request</span><span class='lparen'>(</span><span class='id identifier rubyid_well'>well</span><span class='rparen'>)</span>
  <span class='comment'># TODO: create a genotyping request for the control request
</span>  <span class='comment'># Request.create(:state =&gt; &quot;pending&quot;, :sample =&gt; well.sample, :asset =&gt; well, :target_asset =&gt; Well.create(:sample =&gt; well.sample, :name =&gt; well.sample.name))
</span>  <span class='id identifier rubyid_workflow'>workflow</span><span class='period'>.</span><span class='id identifier rubyid_pipeline'>pipeline</span><span class='period'>.</span><span class='id identifier rubyid_control_request_type'>control_request_type</span><span class='period'>.</span><span class='id identifier rubyid_create_control!'>create_control!</span><span class='lparen'>(</span>
    <span class='label'>asset:</span> <span class='id identifier rubyid_well'>well</span><span class='comma'>,</span>
    <span class='label'>target_asset:</span> <span class='const'>Well</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='label'>aliquots:</span> <span class='id identifier rubyid_well'>well</span><span class='period'>.</span><span class='id identifier rubyid_aliquots'>aliquots</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:dup</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_well_from_control_param-instance_method">
  
    #<strong>get_well_from_control_param</strong>(control_param)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249
250
251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 247</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_well_from_control_param'>get_well_from_control_param</span><span class='lparen'>(</span><span class='id identifier rubyid_control_param'>control_param</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_control_param'>control_param</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([\d]+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_well_id'>well_id</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='const'>Well</span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_well_id'>well_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="partial-instance_method">
  
    #<strong>partial</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_partial'>partial</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cherrypick_batches</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="perform_pick-instance_method">
  
    #<strong>perform_pick</strong>(requests, robot, batch, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>StandardError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 168</span>

<span class='kw'>def</span> <span class='id identifier rubyid_perform_pick'>perform_pick</span><span class='lparen'>(</span><span class='id identifier rubyid_requests'>requests</span><span class='comma'>,</span> <span class='id identifier rubyid_robot'>robot</span><span class='comma'>,</span> <span class='id identifier rubyid_batch'>batch</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_max_plates'>max_plates</span> <span class='op'>=</span> <span class='id identifier rubyid_robot'>robot</span><span class='period'>.</span><span class='id identifier rubyid_max_beds'>max_beds</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The chosen robot has no beds!</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_max_plates'>max_plates</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>

  <span class='id identifier rubyid_batch'>batch</span>                          <span class='op'>=</span> <span class='const'>BatchWrapper</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_batch'>batch</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_plates'>plates</span><span class='comma'>,</span> <span class='id identifier rubyid_current_plate'>current_plate</span>          <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_batch'>batch</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_source_plates'>source_plates</span><span class='comma'>,</span> <span class='id identifier rubyid_current_sources'>current_sources</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_plates_hash'>plates_hash</span>                    <span class='op'>=</span> <span class='id identifier rubyid_build_plate_wells_from_requests'>build_plate_wells_from_requests</span><span class='lparen'>(</span><span class='id identifier rubyid_requests'>requests</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_push_completed_plate'>push_completed_plate</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_plates'>plates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_current_plate'>current_plate</span><span class='period'>.</span><span class='id identifier rubyid_completed_view'>completed_view</span>
    <span class='id identifier rubyid_current_sources'>current_sources</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
    <span class='id identifier rubyid_current_plate'>current_plate</span> <span class='op'>=</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_batch'>batch</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_plates_hash'>plates_hash</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request_id'>request_id</span><span class='comma'>,</span> <span class='id identifier rubyid_plate_barcode'>plate_barcode</span><span class='comma'>,</span> <span class='id identifier rubyid_well_location'>well_location</span><span class='op'>|</span>
    <span class='comment'># Doing this here ensures that the plate_barcode being processed will be the first
</span>    <span class='comment'># well on the new plate.
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_current_sources'>current_sources</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_plate_barcode'>plate_barcode</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_push_completed_plate'>push_completed_plate</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_current_sources'>current_sources</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='id identifier rubyid_current_sources'>current_sources</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>%</span> <span class='id identifier rubyid_max_plates'>max_plates</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_current_plate'>current_plate</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_source_plates'>source_plates</span>   <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_plate_barcode'>plate_barcode</span>
      <span class='id identifier rubyid_current_sources'>current_sources</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_plate_barcode'>plate_barcode</span>
    <span class='kw'>end</span>

    <span class='comment'># Add this well to the pick and if the plate is filled up by that push it to the list.
</span>    <span class='id identifier rubyid_current_plate'>current_plate</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_request_id'>request_id</span><span class='comma'>,</span> <span class='id identifier rubyid_plate_barcode'>plate_barcode</span><span class='comma'>,</span> <span class='id identifier rubyid_well_location'>well_location</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_push_completed_plate'>push_completed_plate</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>if</span> <span class='id identifier rubyid_current_plate'>current_plate</span><span class='period'>.</span><span class='id identifier rubyid_full?'>full?</span>
  <span class='kw'>end</span>

  <span class='comment'># Ensure that a non-empty plate is stored and that the control plate is added if it has been used
</span>  <span class='id identifier rubyid_push_completed_plate'>push_completed_plate</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>unless</span> <span class='id identifier rubyid_current_plate'>current_plate</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_source_plates'>source_plates</span> <span class='op'>&lt;&lt;</span> <span class='const'>ControlPlate</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_barcode'>barcode</span> <span class='kw'>if</span> <span class='id identifier rubyid_batch'>batch</span><span class='period'>.</span><span class='id identifier rubyid_control_added?'>control_added?</span>

  <span class='lbracket'>[</span><span class='id identifier rubyid_plates'>plates</span><span class='comma'>,</span> <span class='id identifier rubyid_source_plates'>source_plates</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pick_new_plate-instance_method">
  
    #<strong>pick_new_plate</strong>(requests, template, robot, batch, plate_purpose)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 150</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pick_new_plate'>pick_new_plate</span><span class='lparen'>(</span><span class='id identifier rubyid_requests'>requests</span><span class='comma'>,</span> <span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_robot'>robot</span><span class='comma'>,</span> <span class='id identifier rubyid_batch'>batch</span><span class='comma'>,</span> <span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_target_type'>target_type</span> <span class='op'>=</span> <span class='const'>PickTarget</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_perform_pick'>perform_pick</span><span class='lparen'>(</span><span class='id identifier rubyid_requests'>requests</span><span class='comma'>,</span> <span class='id identifier rubyid_robot'>robot</span><span class='comma'>,</span> <span class='id identifier rubyid_batch'>batch</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_batch'>batch</span><span class='op'>|</span>
    <span class='id identifier rubyid_target_type'>target_type</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_batch'>batch</span><span class='comma'>,</span> <span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:asset_shape</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pick_onto_partial_plate-instance_method">
  
    #<strong>pick_onto_partial_plate</strong>(requests, template, robot, batch, partial_plate)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160
161
162
163
164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 157</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pick_onto_partial_plate'>pick_onto_partial_plate</span><span class='lparen'>(</span><span class='id identifier rubyid_requests'>requests</span><span class='comma'>,</span> <span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_robot'>robot</span><span class='comma'>,</span> <span class='id identifier rubyid_batch'>batch</span><span class='comma'>,</span> <span class='id identifier rubyid_partial_plate'>partial_plate</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_purpose'>purpose</span> <span class='op'>=</span> <span class='id identifier rubyid_partial_plate'>partial_plate</span><span class='period'>.</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span>
  <span class='id identifier rubyid_target_type'>target_type</span> <span class='op'>=</span> <span class='const'>PickTarget</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='id identifier rubyid_purpose'>purpose</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_perform_pick'>perform_pick</span><span class='lparen'>(</span><span class='id identifier rubyid_requests'>requests</span><span class='comma'>,</span> <span class='id identifier rubyid_robot'>robot</span><span class='comma'>,</span> <span class='id identifier rubyid_batch'>batch</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_batch'>batch</span><span class='op'>|</span>
    <span class='id identifier rubyid_target_type'>target_type</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_batch'>batch</span><span class='comma'>,</span> <span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_purpose'>purpose</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:asset_shape</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_partial_plate'>partial_plate</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_partial_plate'>partial_plate</span> <span class='op'>=</span> <span class='kw'>nil</span>  <span class='comment'># Ensure that subsequent calls have no partial plate
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_task-instance_method">
  
    #<strong>render_task</strong>(workflow, params)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/cherrypick_task.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_task'>render_task</span><span class='lparen'>(</span><span class='id identifier rubyid_workflow'>workflow</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='kw'>super</span>
  <span class='id identifier rubyid_workflow'>workflow</span><span class='period'>.</span><span class='id identifier rubyid_render_cherrypick_task'>render_cherrypick_task</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Oct 25 15:22:11 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>