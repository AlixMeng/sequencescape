<%#This file is part of SEQUENCESCAPE; it is distributed under the terms of GNU General Public License version 1 or later;
#Please refer to the LICENSE and README files for information on licensing and authorship of this file.
#Copyright (C) 2007-2011,2011 Genome Research Ltd.%>
<div id="navi" class="yui-navset">
  <ul class="yui-nav">
    <% @summaries.each_with_index do |description, index| %>
    <% selected = summary.to_i == index ? 'selected' : '' %>
    <%= content_tag(:li, :class=>selected) do %>
      <%= link_to content_tag(:em) { description }, show_summary_study_workflow_path(@study,@workflow, {:summary => index}.merge(@extra_params)), :class => (summary.to_i == index ? 'selected' : ''), :remote => true, :'data-throbber' => '#loading', :'data-failure' => '#remote_error', :'data-update' => '#everything' %>
      <% end %>
    <% end %>
  </ul>
  <script type="text/javascript">
    (function($,undefined) {
      var liList = $("#navi ul li");
      liList.each(function(pos, node) {
        var li = $(node);
        // Tab selection behaviour
        li.on("ajax:beforeSend", function(event, object) {
          liList.removeClass("selected")
          li.addClass("selected");
        });
        // Loads the content of the selected tab
        if (li.hasClass("selected")) {
          $("a", li).trigger("click");
        };
      });
    }(jQuery));
  </script>
  <div class="yui-content">
    <%= loading_bar %>
    <%= remote_error %>
    <div id="everything">

    </div>
  </div>
</div>
